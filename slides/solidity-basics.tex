% Choose one to switch between slides and handout
%\documentclass[]{beamer}
\documentclass[handout]{beamer}

% Video Meta Data
\title{Smart Contracts and Decentralized Finance}
\subtitle{Solidity Basics 1}
\author{Prof. Dr. Fabian Sch√§r}
\institute{University of Basel}

% Config File
\input{../config/config.tex}
%\usepackage{array}
%\usepackage[table]{xcolor}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\thispagestyle{empty}
\begin{frame}[noframenumbering]
	\titlepage
\end{frame}

%%%
\begin{frame}{What is Solidity?}

\begin{columns}[T]
	\begin{column}{0.7\textwidth}
		Solidity is \dots
			\begin{itemize}
				\item<1-> a curly-bracket \{\} language.
				\item<2-> influenced by C++, Python and JavaScript.
				\item<3-> statistically typed, supports inheritance, libraries and complex user-defined types.
				\item<4-> still under rapid development with regular breaking changes.
			\end{itemize}
	\end{column}
	\begin{column}{0.3\textwidth}
	\center
			\includegraphics[scale=0.04]{../assets/images/solidity_logo_new}
	\end{column}
\end{columns}	

\vspace{1em}
	
\uncover<5->{
	\begin{keytakeaway}{Cutting edge tech}
		Use documentation frequently: \link \href{https://docs.soliditylang.org}{https://docs.soliditylang.org}
	\end{keytakeaway}
	}

\end{frame}
%%%	


%%%
\begin{frame}{Solidity Version and the Pragma}

	\texttt{\textcolor{blue}{pragma solidity} \^{}0.8.9;}
\vspace{1em}
	\begin{itemize}
		\item<1-> The pragma declares the version of the compiler to be used.
 		\item<2-> Versioning follows \link \href{https://semver.org/}{semver}: \textbf{Major.Minor.Patch}
 		\item<3-> Breaking changes only with new minor versions. \\ {\small $\rightarrow$ Next time with 0.9.0}
		\item<4->  \^{} is commonly used and means "including any future version until the next minor release" or "patch updates are allowed". \\
 {$\rightarrow$ \small Example: Everything from 0.8.9 until 0.9.0}
 		\item<5-> Use the same pragma for all files in a project!
	\end{itemize}
	
\end{frame}
%%%


%%%
\begin{frame}{Basic Contract Structure}

	\begin{samplecode}{Basic Contract Structure}
		\input{../assets/solidity_code/basic-contract-structure.tex}
	\end{samplecode}
	\vspace{1em}
	\begin{itemize}
		\item \textbf{License identifier:} \texttt{UNLICENSED} is possible, but don't omit it.
		\item \textbf{Contract:} \texttt{\textcolor{blue}{contract} <ContractName> \{\}}
	\end{itemize}

\end{frame}
%%%


%%%
\begin{frame}{State Variables}

	\begin{itemize}
		\item State variables for a contract are permanently stored on the blockchain.
		\item Arbitrarily large area to store variables, but it is the most expensive operation.
		\item Complex types can be larger and usually store their length in the initial 32 bytes slot
	\end{itemize}
	
	\begin{figure}
		\includegraphics[scale=0.2]{../assets/images/sc_storage}
\caption{\link \href{https://programtheblockchain.com/posts/2018/03/09/understanding-ethereum-smart-contract-storage/}{Understanding Ethereum Smart Contract Storage}}
		\label{fig:sc_storage}
	\end{figure}

\end{frame}
%%%

%%%
\begin{frame}{Integers}

	\begin{samplecode}{Integers}
		\input{../assets/solidity_code/integers.tex}
	\end{samplecode}
	\begin{itemize}
		\item<2->{\texttt{\textcolor{teal}{uint}}, which is short for \texttt{\textcolor{teal}{uint256}} is the native integer.}
		\item<3->{Most common type. Can store a single number up to 32 bytes.}
		\item<4->{Stores non-negative values from \texttt{[0,$2^{256-1}$]}}
		\item<5->{There exist smaller \texttt{\textcolor{teal}{uints}}, like \texttt{\textcolor{teal}{uint8}}, \texttt{\textcolor{teal}{uint16}}, ..., \texttt{\textcolor{teal}{uint248}}, but under normal circumstances they are all converted to \texttt{\textcolor{teal}{uint256}} before use.}
		\item<6->{\texttt{\textcolor{teal}{int}} resp. \texttt{\textcolor{teal}{int256}} can store negative numbers in half the range of \texttt{\textcolor{teal}{uint256}}. Only use \texttt{\textcolor{teal}{int}} when you explicitly need negative numbers. }
	\end{itemize}

\end{frame}
%%%

%%%
\begin{frame}{More Elementary Types}

	\begin{itemize}
		\item<1-> \texttt{\textcolor{teal}{address}}: Stores a 20 byte Ethereum address.
		\item<1-> \texttt{\textcolor{teal}{bool}}: Can be \texttt{\textcolor{blue}{true}} or \texttt{\textcolor{blue}{false}}. For logical operations.
		\item<1-> \texttt{\textcolor{teal}{bytes1},\dots,\textcolor{teal}{bytes32}}: Stores arbitrarily data of a fixed size.
		\item<1-> \texttt{\textcolor{teal}{fixed}} / \texttt{\textcolor{teal}{ufixed}}: Fixed point numbers are not fully supported yet. Do not use them!
	\end{itemize}
	
	\vspace{1em}
	
	\uncover<2->{ We will look at more variable types as we use them.}
	
\end{frame}
%%%

%%%
\begin{frame}{Let's Build an Auction Platform}

	\begin{itemize}
		\item<1-> One contract per auction
		\item<1-> Anyone can participate
		\item<1-> Start with a simple timed auction and explore other auction types later.
	\end{itemize}
	
\uncover<2->{
	\begin{samplecode}{Auction Contract}
		\input{../assets/solidity_code/auction-contract.tex}
	\end{samplecode}
	}
	
\end{frame}
%%%

%%%
\begin{frame}{Variable Default Values}

	\begin{table}
		\begin{tabular}{m{4cm} m{4cm}}
		\rowcolor{highlight}
			\hline
			Data Types & Zero Values\\
			\hline 
			\rowcolor{brightanthracite}
			Integer types & \texttt{0} \\
			bool &  \texttt{false} \\
			\rowcolor{brightanthracite}
			address & \texttt{0x0} \\
			byte & \texttt{0} \\
			\rowcolor{brightanthracite}
			Array & [ ] (length = 0) \\
			mapping & no keys \\
			\rowcolor{brightanthracite}
			enum & (first choice) \\
			string & " " \\
			\hline
		\end{tabular}
%		\caption{Variable default values}
%		\label{tbl:variable_default_values}
	\end{table}	

\begin{itemize}
		\item Each variable has a default value when initialized.
		\item E.g. \texttt{\textcolor{teal}{bool} hasEnded;} is the same as \texttt{\textcolor{teal}{bool} hasEnded = \textcolor{blue}{false};}
	\end{itemize}	
	
\end{frame}

%%%

\end{document}